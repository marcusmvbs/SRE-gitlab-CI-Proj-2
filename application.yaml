apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: web-app
  namespace: argocd
spec:
  project: default
  source:
    repoURL: https://github.com/marcusmvbs/SRE-argoCD-Proj-2.git
    targetRevision: main
    path: charts/dev # Path to your Helm chart directory
  destination:
    server: 'https://kubernetes.default.svc'
  syncPolicy:
    syncOptions:
    - CreateNamespace=true
    automated:
      selfHeal: true
      prune: true
  applications:
    # - name: redis
    #   source:
    #     path: charts/dev/cache
    #   destination:
    #     namespace: cache-ns

    - name: ingress-controller
      source:
        path: charts/dev/ingress
      destination:
        namespace: default

    # - name: k10
    #   source:
    #     path: charts/dev/kasten
    #   destination:
    #     namespace: backup-ns

    # - name: fluentbit
    #   source:
    #     path: charts/dev/logs
    #   destination:
    #     namespace: logs-ns

    - name: nginx
      source:
        path: charts/dev/nginx
      destination:
        namespace: default

    # - name: prometheus
    #   source:
    #     path: charts/dev/prometheus
    #   destination:
    #     namespace: monitoring-ns

    # - name: sql-database
    #   source:
    #     path: charts/dev/sql-database
    #   destination:
    #     namespace: database-ns